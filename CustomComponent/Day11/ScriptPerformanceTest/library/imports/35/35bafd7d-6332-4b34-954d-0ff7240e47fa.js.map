{"version":3,"sources":["assets/Script/normal/BallLineTestNormal.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import LineRectTestNormal from \"./LineRectTestNormal\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BallLineTestNormal extends cc.Component {\n\n    v: cc.Node = null;\n\n    h: cc.Node = null;\n\n    graphics: cc.Graphics = null;\n\n    graphicsPool: cc.Node = null;\n\n    ballID: number = 0;\n\n    onLoad () {\n        this.v = cc.find(\"Canvas/V\");\n        this.h = cc.find(\"Canvas/H\");\n        this.graphicsPool = cc.find(\"Canvas/graphicsPool\");\n        this.graphics = this.graphicsPool.children[this.ballID].getComponent(cc.Graphics);\n        // this.node.getComponent(cc.Animation).defaultClip.speed = 0.7;\n    }\n\n    update(deltaTime: number) {\n        if (!this.v || !this.h || !this.graphics) return;\n\n        this.updateGraphicsColor();\n        this.graphics.clear();\n        this.vLineTest();\n        this.hLineTest();\n    }\n\n    updateGraphicsColor () {\n        var r = Math.floor(Math.random() * 256);\n        var g = Math.floor(Math.random() * 256);\n        var b = Math.floor(Math.random() * 256);\n        this.graphics.strokeColor = cc.color(r, g, b);\n    }\n\n    vLineTest () {\n        for (var i = 0; i < this.v.children.length; i++) {\n            var v1NodePos = this.v.children[i].children[0].position;\n            var v1WorldPos = this.v.children[i].convertToWorldSpaceAR(v1NodePos);\n            var drawPos1 = this.graphicsPool.convertToNodeSpaceAR(v1WorldPos);\n\n            var v2NodePos = this.v.children[i].children[1].position;\n            var v2WorldPos = this.v.children[i].convertToWorldSpaceAR(v2NodePos);\n            var drawPos2 = this.graphicsPool.convertToNodeSpaceAR(v2WorldPos);\n\n            var vPos1 = cc.v2(v1WorldPos.x, v1WorldPos.y);\n            var vPos2 = cc.v2(v2WorldPos.x, v2WorldPos.y);\n            var testResult = LineRectTestNormal.lineRect(vPos1, vPos2, this.node.getBoundingBoxToWorld());\n            if (testResult) {\n                this.graphics.moveTo(drawPos1.x, drawPos1.y);\n                this.graphics.lineTo(drawPos2.x, drawPos2.y);\n                this.graphics.stroke();\n            }\n        }\n    }\n\n    hLineTest () {\n        for (var i = 0; i < this.h.children.length; i++) {\n            var h1NodePos = this.h.children[i].children[0].position;\n            var h1WorldPos = this.h.children[i].convertToWorldSpaceAR(h1NodePos);\n            var drawPos1 = this.graphicsPool.convertToNodeSpaceAR(h1WorldPos);\n\n            var h2NodePos = this.h.children[i].children[1].position;\n            var h2WorldPos = this.h.children[i].convertToWorldSpaceAR(h2NodePos);\n            var drawPos2 = this.graphicsPool.convertToNodeSpaceAR(h2WorldPos);\n\n            var hPos1 = cc.v2(h1WorldPos.x, h1WorldPos.y);\n            var hPos2 = cc.v2(h2WorldPos.x, h2WorldPos.y);\n            var testResult = LineRectTestNormal.lineRect(hPos1, hPos2, this.node.getBoundingBoxToWorld());\n            if (testResult) {\n                this.graphics.moveTo(drawPos1.x, drawPos1.y);\n                this.graphics.lineTo(drawPos2.x, drawPos2.y);\n                this.graphics.stroke();\n            }\n        }\n    }\n}\n"]}