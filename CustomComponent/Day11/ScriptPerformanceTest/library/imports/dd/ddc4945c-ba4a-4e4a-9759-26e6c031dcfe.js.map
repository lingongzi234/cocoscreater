{"version":3,"sources":["assets/Script/GameControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport BallLineTestOptimize from \"./optimize/BallLineTestOptimize\";\nimport BallLineTestNormal from \"./normal/BallLineTestNormal\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class GameControl extends cc.Component {\n\n    @property(cc.Prefab)\n    box: cc.Prefab = null;\n\n    @property(cc.Label)\n    fpsLab: cc.Label = null;\n\n    @property(cc.Slider)\n    waitFrameSlider: cc.Slider = null;\n    \n    @property({range: [0, 10, 1]})\n    waitFrames: number = 0;\n\n    _maxWaitFrames: number = 10;\n\n    _total: number = 0;\n    _fps: number = 0;\n    _time: number = 0;\n    _ballCount: number = 0;\n\n    _runOptimize: boolean = false;\n\n    @property(cc.Node)\n    graphicsPool: cc.Node = null;\n\n    onLoad () {\n        cc.debug.setDisplayStats(true);\n        this._time = performance.now();\n        cc.director.on(cc.Director.EVENT_AFTER_DRAW, ()=>{\n            var now = performance.now();\n            var deletaTime = now - this._time;\n            this._total++;\n            if (deletaTime >= 500) {\n                this._fps = Math.floor((1000 * this._total / deletaTime) * 100) / 100;\n                this.fpsLab.string = \"fps: \" + this._fps + \" balls: \" + this._ballCount + \" waitFrames: \" + this.waitFrames;\n                this._total = 0;\n                this._time = now;\n            }\n        }, this)\n\n        this.waitFrameSlider.progress = Math.floor(this.waitFrames / 10);\n    }\n\n    sendBoxToScene() {\n        var graphicsNode = new cc.Node();\n        var graphics = graphicsNode.addComponent(cc.Graphics);\n        graphics.lineWidth = 10;\n        this.graphicsPool.addChild(graphicsNode);\n\n        var box = cc.instantiate(this.box);\n        var lineTestComp: BallLineTestOptimize | BallLineTestNormal = null;\n        if (this._runOptimize) {\n            lineTestComp = box.addComponent(BallLineTestOptimize);\n        } else {\n            lineTestComp = box.addComponent(BallLineTestNormal);\n        }\n        lineTestComp.ballID = this._ballCount;\n        this.node.getChildByName(\"ballPool\").addChild(box);\n\n        this._ballCount++;\n    }\n\n    ballCountInputEnd (editComp: cc.EditBox) {\n        this._ballCount = 0;\n        var count = parseInt(editComp.string);\n        if (count > 0) {\n            this.node.getChildByName(\"ballPool\").destroyAllChildren();\n            this.graphicsPool.destroyAllChildren();\n            for (let i = 0; i < count; i++) {\n                setTimeout(this.sendBoxToScene.bind(this), 100 * i);\n            }\n        }\n    }\n\n    changeOptimizeType () {\n        this._runOptimize = !this._runOptimize;\n        if (this._runOptimize) {\n            cc.find(\"Canvas/projectType\").getComponent(cc.Label).string = \"当前方案: 优化\";\n        } else {\n            cc.find(\"Canvas/projectType\").getComponent(cc.Label).string = \"当前方案: 普通\";\n        }\n        this.clearAll();\n    }\n\n    clearAll () {\n        this.node.getChildByName(\"ballPool\").destroyAllChildren();\n        this.graphicsPool.destroyAllChildren();\n    }\n\n    waitFrameSliderInput (slider: cc.Slider) {\n        this.waitFrames = Math.floor(slider.progress * this._maxWaitFrames);\n    }\n}"]}