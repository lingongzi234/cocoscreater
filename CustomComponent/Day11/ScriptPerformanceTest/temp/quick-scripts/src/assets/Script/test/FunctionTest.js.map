{"version":3,"sources":["assets/Script/test/FunctionTest.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAEhF,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAsC,4BAAY;IAAlD;QAAA,qEAiEC;QA/DG,oBAAc,GAAU,EAAE,CAAC;QAE3B,gBAAU,GAAW,GAAG,CAAC;QACzB,iBAAW,GAAW,GAAG,CAAC;;IA4D9B,CAAC;IA1DG,yBAAM,GAAN;QACI,sBAAsB;QACtB,IAAI,eAAe,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QAC7D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,GAAG,eAAe,EAAE,CAAC,EAAE,EAAE;YACxD,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG;gBACrB,IAAI,EAAE,MAAM;gBACZ,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;gBACJ,CAAC,EAAE,CAAC;aACP,CAAA;SACJ;QACD,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;IAChD,CAAC;IAED,wCAAqB,GAArB;QACI,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACxD,CAAC;IAED,qCAAkB,GAAlB;QACI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;IAC9C,CAAC;IAED,mCAAgB,GAAhB,UAAiB,SAAS;QACtB,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QACnC,IAAI,YAAY,GAAG,EAAE,CAAC;QACtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACvC,IAAM,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAI,KAAK,CAAC,IAAI,KAAK,MAAM,EAAE;gBACvB,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC5B;iBAAM,IAAI,KAAK,CAAC,IAAI,KAAK,MAAM,EAAE;gBAC9B,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;gBAC1D,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAC3B;SACJ;QACD,OAAO,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACtC,OAAO,YAAY,CAAC;IACxB,CAAC;IAED,4CAAyB,GAAzB,UAA0B,SAAS;QAC/B,OAAO,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QACtC,IAAI,YAAY,GAAG,EAAE,CAAC;QACtB,YAAY,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;QACvC,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE;YAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAM,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC3B,YAAY,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;aAC3B;SACJ;aAAM,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE;YACrC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAM,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC3B,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;gBAC1D,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;aAC1B;SACJ;QACD,OAAO,CAAC,OAAO,CAAC,uBAAuB,CAAC,CAAC;QACzC,OAAO,YAAY,CAAC;IACxB,CAAC;IAhEgB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAiE5B;IAAD,eAAC;CAjED,AAiEC,CAjEqC,EAAE,CAAC,SAAS,GAiEjD;kBAjEoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    imageDataArray: any[] = [];\n\n    imageWidth: number = 100;\n    imageHeight: number = 100;\n\n    onLoad() {\n        //填充 imageDataArray 数据\n        var imageDataLength = this.imageWidth * this.imageHeight * 4;\n        for (let i = 0; i < this.imageWidth * imageDataLength; i++) {\n            this.imageDataArray[i] = {\n                type: \"gray\",\n                r: 1,\n                g: 1,\n                b: 1,\n                a: 1\n            }\n        }\n        console.log(\"imageDataArray fill finished\");\n    }\n\n    functionTestOptimized() {\n        this.convertImageDataOptimized(this.imageDataArray);\n    }\n\n    functionTestNormal() {\n        this.convertImageData(this.imageDataArray)\n    }\n\n    convertImageData(imageData) {\n        console.time(\"functionTestNormal\");\n        var newImageData = [];\n        for (let i = 0; i < imageData.length; i++) {\n            const pixel = imageData[i];\n            if (pixel.type === \"rgba\") {\n                newImageData.push(pixel);\n            } else if (pixel.type === \"gray\") {\n                var data = pixel.r * 0.59 + pixel.g * 0.3 + pixel.b * 0.1;\n                newImageData.push(data);\n            }\n        }\n        console.timeEnd(\"functionTestNormal\");\n        return newImageData;\n    }\n\n    convertImageDataOptimized(imageData) {\n        console.time(\"functionTestOptimized\");\n        var newImageData = [];\n        newImageData.length = imageData.length;\n        if (imageData[0].type === \"rgba\") {\n            for (let i = 0; i < imageData.length; i++) {\n                const pixel = imageData[i];\n                newImageData[i] = pixel;\n            }\n        } else if (imageData[0].type === \"gray\") {\n            for (let i = 0; i < imageData.length; i++) {\n                const pixel = imageData[i];\n                var data = pixel.r * 0.59 + pixel.g * 0.3 + pixel.b * 0.1;\n                newImageData[i] = data;\n            }\n        }\n        console.timeEnd(\"functionTestOptimized\");\n        return newImageData;\n    }\n}\n"]}