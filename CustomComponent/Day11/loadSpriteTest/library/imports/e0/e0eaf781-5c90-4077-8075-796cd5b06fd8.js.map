{"version":3,"sources":["assets/Script/LoadManySingleDiffSprite.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class LoadManySingleDiffSprite extends cc.Component {\n\n    @property(cc.Node)\n    testNode: cc.Node = null;\n\n    @property(cc.Node)\n    testNode1: cc.Node = null;\n\n    @property(cc.Label)\n    tips0: cc.Label = null;\n\n    @property(cc.Label)\n    tips1: cc.Label = null;\n\n    @property(cc.Integer)\n    model: number = 2;\n\n    spriteFramePathList: string[] = [\"3013002_1\", \"3013007_1\", \"3013009_1\", \"3013011_1\", \"3013028_1\", \"3013029_1\",\n        \"3013031_1\", \"3023003_1\", \"3023006_1\", \"3023010_1\", \"3023012_1\", \"3023029_1\", \"3023030_1\", \"3023032_1\", \n        \"3033002_1\", \"3033005_1\", \"3033010_1\", \"3033013_1\", \"3033028_1\", \"3033029_1\", \"3033031_1\", \"3043003_1\",\n        \"3043006_1\", \"3043008_1\", \"3043014_1\", \"3043028_1\", \"3043029_1\", \"3043031_1\", \"3053003_1\", \"3053005_1\",\n        \"3053009_1\", \"3053021_1\", \"3053022_1\", \"3063002_1\", \"3063003_1\"\n    ];\n\n    loadLocalBundleTest0 () {\n        let startTime = performance.now();\n        if (this.testNode) {\n            this.testNode.destroyAllChildren();\n        }\n        for (let i = 0; i < this.spriteFramePathList.length; i++) {\n            cc.assetManager.loadBundle(\"kongfu0\", (err0, imageBundle)=>{\n                if (err0) {\n                    console.error(err0);\n                } else {\n                    imageBundle.load(this.spriteFramePathList[i], cc.SpriteFrame, (err1, spf0: cc.SpriteFrame)=>{\n                        if (err1) {\n                            console.error(err1);\n                        } else {\n                            this.setSpriteFrame(this.testNode, this.tips0.getComponent(cc.Label), i, spf0, startTime);\n                        }\n                    })\n                }\n            })\n        }\n    }\n\n    loadLocalBundleTest1 () {\n        let startTime = performance.now();\n        if (this.testNode1) {\n            this.testNode1.destroyAllChildren();\n        }\n        for (let i = 0; i < this.spriteFramePathList.length; i++) {\n            var bundle = cc.assetManager.getBundle(\"kongfu1\");\n            if (bundle) {\n                var spriteFrame: cc.SpriteFrame = bundle.get(this.spriteFramePathList[i], cc.SpriteFrame);\n                if (spriteFrame) {\n                    this.setSpriteFrame(this.testNode1, this.tips1.getComponent(cc.Label), i, spriteFrame, startTime);\n                }\n            } else {\n                // 使用默认的异步加载 bundle 并加载 bundle 文件夹内的图片资源，成功后渲染所有图片\n                this.loadBundleAndSpriteFrame(i, startTime);\n            }\n        }\n    }\n\n    loadBundleAndSpriteFrame (i: number, startTime: number) {\n        cc.assetManager.loadBundle(\"kongfu1\", (err0, imageBundle)=>{\n            if (err0) {\n                console.error(err0);\n            } else {\n                imageBundle.load(this.spriteFramePathList[i], cc.SpriteFrame, (err1, spf1: cc.SpriteFrame)=>{\n                    if (err1) {\n                        console.error(err1);\n                    } else {\n                        this.setSpriteFrame(this.testNode1, this.tips1.getComponent(cc.Label), i, spf1, startTime);\n                    }\n                })\n            }\n        })\n    }\n\n    setSpriteFrame (parent: cc.Node, tipLab: cc.Label, i: number, spf: cc.SpriteFrame, startTime: number) {\n        if (parent) {\n            var node = new cc.Node();\n            node.scale = 0.2;\n            node.addComponent(cc.Sprite).spriteFrame = spf;\n            parent.addChild(node);\n            if (i === this.spriteFramePathList.length - 1) {\n                tipLab.string = \"loadTime is: \" + Math.floor(1000 * (performance.now() - startTime)) / 1000;\n            }\n        }\n    }\n}\n"]}