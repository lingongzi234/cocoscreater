{"version":3,"sources":["assets/Script/LoadManySingleSprite.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Helloworld extends cc.Component {\n    @property(cc.Node)\n    testNode: cc.Node = null;\n\n    @property(cc.Node)\n    testNode1: cc.Node = null;\n\n    @property\n    loadSpriteCount: number = 35;\n\n    @property(cc.Label)\n    tips0: cc.Label = null;\n\n    @property(cc.Label)\n    tips1: cc.Label = null;\n\n\n    loadLocalBundleTest0 () {\n        let startTime = performance.now();\n        if (this.testNode) {\n            this.testNode.destroyAllChildren();\n        }\n        for (let i = 0; i < this.loadSpriteCount; i++) {\n            cc.assetManager.loadBundle(\"kongfu0\", (err0, imageBundle)=>{\n                if (err0) {\n                    console.error(err0);\n                } else {\n                    imageBundle.load(\"3013002_1\", cc.SpriteFrame, (err1, spf0: cc.SpriteFrame)=>{\n                        if (err1) {\n                            console.error(err1);\n                        } else {\n                            this.setSpriteFrame0(spf0, i, startTime);\n                        }\n                    })\n                }\n            })\n        }\n    }\n\n    async loadLocalBundleTest1 () {\n        let startTime = performance.now();\n        if (this.testNode1) {\n            this.testNode1.destroyAllChildren();\n        }\n        for (let i = 0; i < this.loadSpriteCount; i++) {\n            var bundle = cc.assetManager.getBundle(\"kongfu1\");\n            if (bundle) {\n                var spriteFrame: cc.SpriteFrame = bundle.get(\"3013002_1\", cc.SpriteFrame);\n                if (spriteFrame) {\n                    this.setSpriteFrame1(spriteFrame, i, startTime);\n                }\n            } else {\n                // 因为 for 循环执行循环体代码的间隔时间是极短的，如果在循环体代码中 load 资源\n                // 那么循环体代码中并不能准确获取到 bundle 和图片的缓存资源\n                // 所以这里可以使用 await Promise 的方法等待 bundle 和图片资源加载成功后再执行后续的循环体代码\n                // 这样 for 循环后续的循环体代码就可以成功获取到已经加载的 bundle 和图片的缓存资源\n                await this.loadBundleAndSpriteFrameAsync().then((spf: cc.SpriteFrame) => {\n                    this.setSpriteFrame1(spf, i, startTime);\n                });\n            }\n        }\n    }\n\n    loadBundleAndSpriteFrameAsync () {\n        return new Promise((resolve, reject) => {\n            cc.assetManager.loadBundle(\"kongfu1\", (err0, imageBundle)=>{\n                if (err0) {\n                    console.error(err0);\n                } else {\n                    imageBundle.load(\"3013002_1\", cc.SpriteFrame, (err1, spf1: cc.SpriteFrame)=>{\n                        if (err1) {\n                            console.error(err1);\n                        } else {\n                            resolve(spf1)\n                        }\n                    })\n                }\n            })\n        })    \n    }\n\n    setSpriteFrame0 (spf: cc.SpriteFrame, i: number, startTime: number) {\n        if (this.testNode) {\n            var node = new cc.Node();\n            node.scale = 0.2;\n            node.addComponent(cc.Sprite).spriteFrame = spf;\n            this.testNode.addChild(node);\n            if (i === this.loadSpriteCount - 1) {\n                this.tips0.string = \"loadTime0 is: \" + Math.floor(1000 * (performance.now() - startTime)) / 1000;\n            }\n        }\n    }\n\n    setSpriteFrame1 (spf: cc.SpriteFrame, i: number, startTime: number) {\n        if (this.testNode1) {\n            var node = new cc.Node();\n            node.scale = 0.2;\n            node.addComponent(cc.Sprite).spriteFrame = spf;\n            this.testNode1.addChild(node);\n            if (i === this.loadSpriteCount - 1) {\n                this.tips1.string = \"loadTime1 is: \" + Math.floor(1000 * (performance.now() - startTime)) / 1000;\n            }\n        }\n    }\n}\n"]}