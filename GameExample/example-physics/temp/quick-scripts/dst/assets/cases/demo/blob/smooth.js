
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/cases/demo/blob/smooth.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '728adjSVu9P25Kw0adaz7UV', 'smooth');
// cases/demo/blob/smooth.js

'use strict'; // smooth helper

function getFirstControlPoints(rhs) {
  var n = rhs.length,
      x = [],
      // Solution vector.
  tmp = [],
      // Temp workspace.
  b = 2.0,
      i;
  x[0] = rhs[0] / b;

  for (i = 1; i < n; i++) {
    // Decomposition and forward substitution.
    tmp[i] = 1 / b;
    b = (i < n - 1 ? 4.0 : 2.0) - tmp[i];
    x[i] = (rhs[i] - x[i - 1]) / b;
  }

  for (i = 1; i < n; i++) {
    x[n - i - 1] -= tmp[n - i] * x[n - i]; // Backsubstitution.
  }

  return x;
}

function getCubicBezierCurvePoints(points, firstControlPoints, secondControlPoints) {
  var size = points.length,
      closed = points[size - 1].x === points[0].x && points[size - 1].y === points[0].y,
      n = size,
      // Add overlapping ends for averaging handles in closed paths
  overlap = 0;

  if (closed) {
    size = n = size - 1;
  }

  if (size <= 2) return;

  if (closed) {
    // Overlap up to 4 points since averaging beziers affect the 4
    // neighboring points
    overlap = Math.min(size, 4);
    n += Math.min(size, overlap) * 2;
  }

  var knots = [];

  for (var i = 0; i < size; i++) {
    knots[i + overlap] = points[i];
  }

  if (closed) {
    // If we're averaging, add the 4 last points again at the
    // beginning, and the 4 first ones at the end.
    for (var i = 0; i < overlap; i++) {
      knots[i] = points[i + size - overlap];
      knots[i + size + overlap] = points[i];
    }
  } else {
    n--;
  } // Calculate first Bezier control points
  // Right hand side vector


  var rhs = []; // Set right hand side X values

  for (var i = 1; i < n - 1; i++) {
    rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;
  }

  rhs[0] = knots[0].x + 2 * knots[1].x;
  rhs[n - 1] = 3 * knots[n - 1].x; // Get first control points X-values

  var x = getFirstControlPoints(rhs); // Set right hand side Y values

  for (var i = 1; i < n - 1; i++) {
    rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;
  }

  rhs[0] = knots[0].y + 2 * knots[1].y;
  rhs[n - 1] = 3 * knots[n - 1].y; // Get first control points Y-values

  var y = getFirstControlPoints(rhs);

  if (closed) {
    // Do the actual averaging simply by linearly fading between the
    // overlapping values.
    for (var i = 0, j = size; i < overlap; i++, j++) {
      var f1 = i / overlap,
          f2 = 1 - f1,
          ie = i + overlap,
          je = j + overlap; // Beginning

      x[j] = x[i] * f1 + x[j] * f2;
      y[j] = y[i] * f1 + y[j] * f2; // End

      x[je] = x[ie] * f2 + x[je] * f1;
      y[je] = y[ie] * f2 + y[je] * f1;
    }

    n--;
  } // Now set the calculated handles


  for (var i = overlap; i <= n - overlap; i++) {
    firstControlPoints[i - overlap] = {
      x: x[i],
      y: y[i]
    };

    if (i < n - 1) {
      secondControlPoints[i - overlap] = {
        x: 2 * knots[i + 1].x - x[i + 1],
        y: 2 * knots[i + 1].y - y[i + 1]
      };
    } else {
      secondControlPoints[i - overlap] = {
        x: (knots[n].x + x[n - 1]) / 2,
        y: (knots[n].y + y[n - 1]) / 2
      };
    }
  }
}

function getCubicBezierCurvePath(knots) {
  var firstControlPoints = [],
      secondControlPoints = [];
  getCubicBezierCurvePoints(knots, firstControlPoints, secondControlPoints);
  return [firstControlPoints, secondControlPoints];
}

module.exports = getCubicBezierCurvePath;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9jYXNlcy9kZW1vL2Jsb2Ivc21vb3RoLmpzIl0sIm5hbWVzIjpbImdldEZpcnN0Q29udHJvbFBvaW50cyIsInJocyIsIm4iLCJsZW5ndGgiLCJ4IiwidG1wIiwiYiIsImkiLCJnZXRDdWJpY0JlemllckN1cnZlUG9pbnRzIiwicG9pbnRzIiwiZmlyc3RDb250cm9sUG9pbnRzIiwic2Vjb25kQ29udHJvbFBvaW50cyIsInNpemUiLCJjbG9zZWQiLCJ5Iiwib3ZlcmxhcCIsIk1hdGgiLCJtaW4iLCJrbm90cyIsImoiLCJmMSIsImYyIiwiaWUiLCJqZSIsImdldEN1YmljQmV6aWVyQ3VydmVQYXRoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsY0FFQTs7QUFDQSxTQUFTQSxxQkFBVCxDQUErQkMsR0FBL0IsRUFBb0M7RUFDaEMsSUFBSUMsQ0FBQyxHQUFHRCxHQUFHLENBQUNFLE1BQVo7RUFBQSxJQUNJQyxDQUFDLEdBQUcsRUFEUjtFQUFBLElBQ2dCO0VBQ1pDLEdBQUcsR0FBRyxFQUZWO0VBQUEsSUFFZ0I7RUFDWkMsQ0FBQyxHQUFHLEdBSFI7RUFBQSxJQUlJQyxDQUpKO0VBTUFILENBQUMsQ0FBQyxDQUFELENBQUQsR0FBT0gsR0FBRyxDQUFDLENBQUQsQ0FBSCxHQUFTSyxDQUFoQjs7RUFFQSxLQUFLQyxDQUFDLEdBQUcsQ0FBVCxFQUFZQSxDQUFDLEdBQUdMLENBQWhCLEVBQW1CSyxDQUFDLEVBQXBCLEVBQXdCO0lBQUU7SUFDdEJGLEdBQUcsQ0FBQ0UsQ0FBRCxDQUFILEdBQVMsSUFBSUQsQ0FBYjtJQUNBQSxDQUFDLEdBQUcsQ0FBQ0MsQ0FBQyxHQUFHTCxDQUFDLEdBQUcsQ0FBUixHQUFZLEdBQVosR0FBa0IsR0FBbkIsSUFBMEJHLEdBQUcsQ0FBQ0UsQ0FBRCxDQUFqQztJQUNBSCxDQUFDLENBQUNHLENBQUQsQ0FBRCxHQUFPLENBQUNOLEdBQUcsQ0FBQ00sQ0FBRCxDQUFILEdBQVNI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QUcsQ0FBTCxDQURNO1FBRS9CTyxDQUFDLEVBQUUsSUFBSUksS0FBSyxDQUFDWCxDQUFDLEdBQUcsQ0FBTCxDQUFMLENBQWFPLENBQWpCLEdBQXFCQSxDQUFDLENBQUNQLENBQUMsR0FBRyxDQUFMO01BRk0sQ0FBbkM7SUFJSCxDQUxELE1BTUs7TUFDREksbUJBQW1CLENBQUNKLENBQUMsR0FBR1EsT0FBTCxDQUFuQixHQUFtQztRQUMvQlgsQ0FBQyxFQUFFLENBQUNjLEtBQUssQ0FBQ2hCLENBQUQsQ0FBTCxDQUFTRSxDQUFULEdBQWFBLENBQUMsQ0FBQ0YsQ0FBQyxHQUFHLENBQUwsQ0FBZixJQUEwQixDQURFO1FBRS9CWSxDQUFDLEVBQUUsQ0FBQ0ksS0FBSyxDQUFDaEIsQ0FBRCxDQUFMLENBQVNZLENBQVQsR0FBYUEsQ0FBQyxDQUFDWixDQUFDLEdBQUcsQ0FBTCxDQUFmLElBQTBCO01BRkUsQ0FBbkM7SUFJSDtFQUNKO0FBQ0o7O0FBRUQsU0FBU3NCLHVCQUFULENBQWlDTixLQUFqQyxFQUF3QztFQUNwQyxJQUFJUixrQkFBa0IsR0FBRyxFQUF6QjtFQUFBLElBQ0lDLG1CQUFtQixHQUFHLEVBRDFCO0VBR0FILHlCQUF5QixDQUFDVSxLQUFELEVBQVFSLGtCQUFSLEVBQTRCQyxtQkFBNUIsQ0FBekI7RUFFQSxPQUFPLENBQUNELGtCQUFELEVBQXFCQyxtQkFBckIsQ0FBUDtBQUNIOztBQUVEYyxNQUFNLENBQUNDLE9BQVAsR0FBaUJGLHVCQUFqQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vLyBzbW9vdGggaGVscGVyXG5mdW5jdGlvbiBnZXRGaXJzdENvbnRyb2xQb2ludHMocmhzKSB7XG4gICAgdmFyIG4gPSByaHMubGVuZ3RoLFxuICAgICAgICB4ID0gW10sICAgICAvLyBTb2x1dGlvbiB2ZWN0b3IuXG4gICAgICAgIHRtcCA9IFtdLCAgIC8vIFRlbXAgd29ya3NwYWNlLlxuICAgICAgICBiID0gMi4wLFxuICAgICAgICBpO1xuXG4gICAgeFswXSA9IHJoc1swXSAvIGI7XG5cbiAgICBmb3IgKGkgPSAxOyBpIDwgbjsgaSsrKSB7IC8vIERlY29tcG9zaXRpb24gYW5kIGZvcndhcmQgc3Vic3RpdHV0aW9uLlxuICAgICAgICB0bXBbaV0gPSAxIC8gYjtcbiAgICAgICAgYiA9IChpIDwgbiAtIDEgPyA0LjAgOiAyLjApIC0gdG1wW2ldO1xuICAgICAgICB4W2ldID0gKHJoc1tpXSAtIHhbaSAtIDFdKSAvIGI7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMTsgaSA8IG47IGkrKykge1xuICAgICAgICB4W24gLSBpIC0gMV0gLT0gdG1wW24gLSBpXSAqIHhbbiAtIGldOyAvLyBCYWNrc3Vic3RpdHV0aW9uLlxuICAgIH1cbiAgICByZXR1cm4geDtcbn1cblxuZnVuY3Rpb24gZ2V0Q3ViaWNCZXppZXJDdXJ2ZVBvaW50cyhwb2ludHMsIGZpcnN0Q29udHJvbFBvaW50cywgc2Vjb25kQ29udHJvbFBvaW50cykge1xuICAgIHZhciBzaXplID0gcG9pbnRzLmxlbmd0aCxcbiAgICAgICAgY2xvc2VkID0gcG9pbnRzW3NpemUtMV0ueCA9PT0gcG9pbnRzWzBdLnggJiYgcG9pbnRzW3NpemUtMV0ueSA9PT0gcG9pbnRzWzBdLnksXG4gICAgICAgIG4gPSBzaXplLFxuICAgICAgICAvLyBBZGQgb3ZlcmxhcHBpbmcgZW5kcyBmb3IgYXZlcmFnaW5nIGhhbmRsZXMgaW4gY2xvc2VkIHBhdGhzXG4gICAgICAgIG92ZXJsYXAgPSAwO1xuXG4gICAgaWYgKGNsb3NlZCkge1xuICAgICAgICBzaXplID0gbiA9IHNpemUtMTtcbiAgICB9XG5cbiAgICBpZiAoc2l6ZSA8PSAyKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKGNsb3NlZCkge1xuICAgICAgICAvLyBPdmVybGFwIHVwIHRvIDQgcG9pbnRzIHNpbmNlIGF2ZXJhZ2luZyBiZXppZXJzIGFmZmVjdCB0aGUgNFxuICAgICAgICAvLyBuZWlnaGJvcmluZyBwb2ludHNcbiAgICAgICAgb3ZlcmxhcCA9IE1hdGgubWluKHNpemUsIDQpO1xuICAgICAgICBuICs9IE1hdGgubWluKHNpemUsIG92ZXJsYXApICogMjtcbiAgICB9XG5cbiAgICB2YXIga25vdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKylcbiAgICAgICAga25vdHNbaSArIG92ZXJsYXBdID0gcG9pbnRzW2ldO1xuICAgIGlmIChjbG9zZWQpIHtcbiAgICAgICAgLy8gSWYgd2UncmUgYXZlcmFnaW5nLCBhZGQgdGhlIDQgbGFzdCBwb2ludHMgYWdhaW4gYXQgdGhlXG4gICAgICAgIC8vIGJlZ2lubmluZywgYW5kIHRoZSA0IGZpcnN0IG9uZXMgYXQgdGhlIGVuZC5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdmVybGFwOyBpKyspIHtcbiAgICAgICAgICAgIGtub3RzW2ldID0gcG9pbnRzW2kgKyBzaXplIC0gb3ZlcmxhcF07XG4gICAgICAgICAgICBrbm90c1tpICsgc2l6ZSArIG92ZXJsYXBdID0gcG9pbnRzW2ldO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbi0tO1xuICAgIH1cbiAgICAvLyBDYWxjdWxhdGUgZmlyc3QgQmV6aWVyIGNvbnRyb2wgcG9pbnRzXG4gICAgLy8gUmlnaHQgaGFuZCBzaWRlIHZlY3RvclxuICAgIHZhciByaHMgPSBbXTtcblxuICAgIC8vIFNldCByaWdodCBoYW5kIHNpZGUgWCB2YWx1ZXNcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IG4gLSAxOyBpKyspXG4gICAgICAgIHJoc1tpXSA9IDQgKiBrbm90c1tpXS54ICsgMiAqIGtub3RzW2kgKyAxXS54O1xuICAgIHJoc1swXSA9IGtub3RzWzBdLnggKyAyICoga25vdHNbMV0ueDtcbiAgICByaHNbbiAtIDFdID0gMyAqIGtub3RzW24gLSAxXS54O1xuICAgIC8vIEdldCBmaXJzdCBjb250cm9sIHBvaW50cyBYLXZhbHVlc1xuICAgIHZhciB4ID0gZ2V0Rmlyc3RDb250cm9sUG9pbnRzKHJocyk7XG5cbiAgICAvLyBTZXQgcmlnaHQgaGFuZCBzaWRlIFkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBuIC0gMTsgaSsrKVxuICAgICAgICByaHNbaV0gPSA0ICoga25vdHNbaV0ueSArIDIgKiBrbm90c1tpICsgMV0ueTtcbiAgICByaHNbMF0gPSBrbm90c1swXS55ICsgMiAqIGtub3RzWzFdLnk7XG4gICAgcmhzW24gLSAxXSA9IDMgKiBrbm90c1tuIC0gMV0ueTtcbiAgICAvLyBHZXQgZmlyc3QgY29udHJvbCBwb2ludHMgWS12YWx1ZXNcbiAgICB2YXIgeSA9IGdldEZpcnN0Q29udHJvbFBvaW50cyhyaHMpO1xuXG4gICAgaWYgKGNsb3NlZCkge1xuICAgICAgICAvLyBEbyB0aGUgYWN0dWFsIGF2ZXJhZ2luZyBzaW1wbHkgYnkgbGluZWFybHkgZmFkaW5nIGJldHdlZW4gdGhlXG4gICAgICAgIC8vIG92ZXJsYXBwaW5nIHZhbHVlcy5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBzaXplOyBpIDwgb3ZlcmxhcDsgaSsrLCBqKyspIHtcbiAgICAgICAgICAgIHZhciBmMSA9IGkgLyBvdmVybGFwLFxuICAgICAgICAgICAgICAgIGYyID0gMSAtIGYxLFxuICAgICAgICAgICAgICAgIGllID0gaSArIG92ZXJsYXAsXG4gICAgICAgICAgICAgICAgamUgPSBqICsgb3ZlcmxhcDtcbiAgICAgICAgICAgIC8vIEJlZ2lubmluZ1xuICAgICAgICAgICAgeFtqXSA9IHhbaV0gKiBmMSArIHhbal0gKiBmMjtcbiAgICAgICAgICAgIHlbal0gPSB5W2ldICogZjEgKyB5W2pdICogZjI7XG4gICAgICAgICAgICAvLyBFbmRcbiAgICAgICAgICAgIHhbamVdID0geFtpZV0gKiBmMiArIHhbamVdICogZjE7XG4gICAgICAgICAgICB5W2plXSA9IHlbaWVdICogZjIgKyB5W2plXSAqIGYxO1xuICAgICAgICB9XG4gICAgICAgIG4tLTtcbiAgICB9XG5cbiAgICAvLyBOb3cgc2V0IHRoZSBjYWxjdWxhdGVkIGhhbmRsZXNcbiAgICBmb3IgKHZhciBpID0gb3ZlcmxhcDsgaSA8PSBuIC0gb3ZlcmxhcDsgaSsrKSB7XG5cbiAgICAgICAgZmlyc3RDb250cm9sUG9pbnRzW2kgLSBvdmVybGFwXSA9IHtcbiAgICAgICAgICAgIHg6IHhbaV0sXG4gICAgICAgICAgICB5OiB5W2ldXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGkgPCBuIC0gMSkge1xuICAgICAgICAgICAgc2Vjb25kQ29udHJvbFBvaW50c1tpIC0gb3ZlcmxhcF0gPSB7XG4gICAgICAgICAgICAgICAgeDogMiAqIGtub3RzW2kgKyAxXS54IC0geFtpICsgMV0sXG4gICAgICAgICAgICAgICAgeTogMiAqIGtub3RzW2kgKyAxXS55IC0geVtpICsgMV1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWNvbmRDb250cm9sUG9pbnRzW2kgLSBvdmVybGFwXSA9IHtcbiAgICAgICAgICAgICAgICB4OiAoa25vdHNbbl0ueCArIHhbbiAtIDFdKSAvIDIsXG4gICAgICAgICAgICAgICAgeTogKGtub3RzW25dLnkgKyB5W24gLSAxXSkgLyAyXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRDdWJpY0JlemllckN1cnZlUGF0aChrbm90cykge1xuICAgIHZhciBmaXJzdENvbnRyb2xQb2ludHMgPSBbXSxcbiAgICAgICAgc2Vjb25kQ29udHJvbFBvaW50cyA9IFtdO1xuXG4gICAgZ2V0Q3ViaWNCZXppZXJDdXJ2ZVBvaW50cyhrbm90cywgZmlyc3RDb250cm9sUG9pbnRzLCBzZWNvbmRDb250cm9sUG9pbnRzKTtcblxuICAgIHJldHVybiBbZmlyc3RDb250cm9sUG9pbnRzLCBzZWNvbmRDb250cm9sUG9pbnRzXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRDdWJpY0JlemllckN1cnZlUGF0aDtcbiJdfQ==