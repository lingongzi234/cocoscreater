{"version":3,"sources":["assets/cases/demo/infinite-world/camera-control.js"],"names":["cc","Class","Component","properties","target","type","Node","onLoad","camera","getComponent","Camera","lateUpdate","dt","targetPos","convertToWorldSpaceAR","Vec2","ZERO","node","position","parent","convertToNodeSpaceAR","ratio","y","winSize","height","zoomRatio"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,MAAM,EAAE;MACJ,WAAS,IADL;MAEJC,IAAI,EAAEL,EAAE,CAACM;IAFL;EADA,CAHP;EAUL;EACAC,MAAM,EAAE,kBAAY;IAChB,KAAKC,MAAL,GAAc,KAAKC,YAAL,CAAkBT,EAAE,CAACU,MAArB,CAAd;EACH,CAbI;EAeL;EACAC,UAAU,EAAE,oBAAUC,EAAV,EAAc;IACtB,IAAIC,SAAS,GAAG,KAAKT,MAAL,CAAYU,qBAAZ,CAAkCd,EAAE,CAACe,IAAH,CAAQC,IAA1C,CAAhB;IACA,KAAKC,IAAL,CAAUC,QAAV,GAAqB,KAAKD,IAAL,CAAUE,MAAV,CAAiBC,oBAAjB,CAAsCP,SAAtC,CAArB;IAEA,IAAIQ,KAAK,GAAGR,SAAS,CAACS,CAAV,GAActB,EAAE,CAACuB,OAAH,CAAWC,MAArC;IACA,KAAKhB,MAAL,CAAYiB,SAAZ,GAAwB,IAAI,CAAC,MAAMJ,KAAP,IAAgB,GAA5C;EACH;AAtBI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        target: {\n            default: null,\n            type: cc.Node\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.camera = this.getComponent(cc.Camera);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    lateUpdate: function (dt) {\n        let targetPos = this.target.convertToWorldSpaceAR(cc.Vec2.ZERO);\n        this.node.position = this.node.parent.convertToNodeSpaceAR(targetPos);\n        \n        let ratio = targetPos.y / cc.winSize.height;\n        this.camera.zoomRatio = 1 + (0.5 - ratio) * 0.5;\n    },\n});"]}