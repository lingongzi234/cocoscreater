{"version":3,"sources":["assets/cases/demo/gravity.js"],"names":["cc","Class","Component","onEnable","manager","director","getPhysicsManager","bodies","body","getComponent","RigidBody","originGravity","gravity","v2","onDisable","onBeginContact","contact","selfCollider","otherCollider","push","onEndContact","index","indexOf","splice","update","dt","i","length","_applyForce"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGL;EACAC,QAAQ,EAAE,oBAAY;IAClB,IAAIC,OAAO,GAAGJ,EAAE,CAACK,QAAH,CAAYC,iBAAZ,EAAd;IAEA,KAAKC,MAAL,GAAc,EAAd;IACA,KAAKC,IAAL,GAAY,KAAKC,YAAL,CAAkBT,EAAE,CAACU,SAArB,CAAZ;IACA,KAAKC,aAAL,GAAqBP,OAAO,CAACQ,OAA7B;IACAR,OAAO,CAACQ,OAAR,GAAkBZ,EAAE,CAACa,EAAH,EAAlB;EACH,CAXI;EAaLC,SAAS,EAAE,qBAAY;IACnBd,EAAE,CAACK,QAAH,CAAYC,iBAAZ,GAAgCM,OAAhC,GAA0C,KAAKD,aAA/C;EACH,CAfI;EAiBLI,cAAc,EAAE,wBAAUC,OAAV,EAAmBC,YAAnB,EAAiCC,aAAjC,EAAgD;IAC5D,KAAKX,MAAL,CAAYY,IAAZ,CAAiBD,aAAa,CAACV,IAA/B;EACH,CAnBI;EAqBLY,YAAY,EAAE,sBAAUJ,OAAV,EAAmBC,YAAnB,EAAiCC,aAAjC,EAAgD;IAC1D,IAAIG,KAAK,GAAG,KAAKd,MAAL,CAAYe,OAAZ,CAAoBJ,aAAa,CAACV,IAAlC,CAAZ;;IACA,IAAIa,KAAK,KAAK,CAAC,CAAf,EAAkB;MACd,KAAKd,MAAL,CAAYgB,MAAZ,CAAmBF,KAAnB,EAA0B,CAA1B;IACH;EACJ,CA1BI;EA4BL;EACAG,MAAM,EAAE,gBAAUC,EAAV,EAAc;IAClB,IAAI,CAAC,KAAKjB,IAAV,EAAgB;MACZ;IACH;;IAED,IAAID,MAAM,GAAG,KAAKA,MAAlB;;IACA,KAAK,IAAImB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnB,MAAM,CAACoB,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;MACpC,KAAKE,WAAL,CAAiBrB,MAAM,CAACmB,CAAD,CAAvB;IACH;EACJ,CAtCI;EAwCLE,WAAW,EAAE,qBAAUpB,IAAV,EAAgB,CAC5B;AAzCI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    // use this for initialization\n    onEnable: function () {\n        let manager = cc.director.getPhysicsManager();\n\n        this.bodies = [];\n        this.body = this.getComponent(cc.RigidBody);\n        this.originGravity = manager.gravity;\n        manager.gravity = cc.v2();\n    },\n\n    onDisable: function () {\n        cc.director.getPhysicsManager().gravity = this.originGravity;\n    },\n\n    onBeginContact: function (contact, selfCollider, otherCollider) {\n        this.bodies.push(otherCollider.body);\n    },\n\n    onEndContact: function (contact, selfCollider, otherCollider) {\n        let index = this.bodies.indexOf(otherCollider.body);\n        if (index !== -1) {\n            this.bodies.splice(index, 1);\n        }\n    },\n    \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if (!this.body) {\n            return;\n        }\n\n        let bodies = this.bodies;\n        for (let i = 0; i < bodies.length; i++) {\n            this._applyForce(bodies[i]);\n        }\n    },\n\n    _applyForce: function (body) {\n    }\n});\n"]}